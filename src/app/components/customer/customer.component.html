<div (click)="openTodoPage()" style="cursor: pointer; padding-left: 8px; transition: 0.2s; padding-right: 8px;" class="out-customer d-flex flex-column py-2 border-bottom mt-2">
  <!-- Anzeige- oder Edit-Modus -->
  <div *ngIf="!edit" class="d-flex justify-content-between align-items-center">
    <span class="text-truncate">{{ customer.name }}</span>
    <div class="d-flex gap-3">
      <button class="btn btn-sm btn-link text-decoration-none">Details</button>
      <button class="btn btn-sm btn-link text-decoration-none" (click)="startEdit(); $event.stopPropagation()">Bearbeiten</button>
      <button class="btn btn-sm btn-link text-danger text-decoration-none" (click)="deleteCustomer(); $event.stopPropagation()">LÃ¶schen</button>
    </div>
  </div>

  <div *ngIf="edit" class="d-flex flex-column gap-2">
    <input
      [(ngModel)]="editName"
      [value]="customer.name"
      type="text"
      class="form-control form-control-sm"
      placeholder="Neuer Name"
      (click)="$event.stopPropagation()"
    />
    <div class="d-flex justify-content-end gap-2">
      <button class="btn btn-sm btn-outline-secondary" (click)="edit = false; $event.stopPropagation()">Abbrechen</button>
      <button class="btn btn-sm btn-primary" (click)="saveNewName(); $event.stopPropagation()">Speichern</button>
    </div>
  </div>

  <!-- Kunden-Link -->
  <div class="mt-1">
    <div class="input-group input-group-sm">
      <input
        type="text"
        [value]="link + customer.id"
        disabled
        class="form-control text-truncate"
        (click)="$event.stopPropagation()"
      />
      <button class="btn btn-outline-primary" (click)="copyLinkToClipboard(); $event.stopPropagation()">Kopieren</button>
    </div>
  </div>

  <!-- Copy Toast -->
  <ion-toast
    *ngIf="copyToastVisible"
    message="Link wurde kopiert!"
    duration="2000"
    color="success"
    [isOpen]="copyToastVisible"
    (didDismiss)="copyToastVisible = false"
    (click)="$event.stopPropagation()"
  ></ion-toast>
</div>
